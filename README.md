This branch is for when the publish size limits are increased in the firmware, then we'll have space for the extra params and the hook can be more generic
